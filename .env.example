# ============================================================
# DATABASE
# ============================================================
# PostgreSQL connection string
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE?schema=SCHEMA
DATABASE_URL="postgresql://user:password@localhost:5432/deploymate?schema=public"

# ============================================================
# AUTHENTICATION (required for login)
# ============================================================
# Copy this file to .env in the project root (same directory as package.json).
# Without AUTH_SECRET or NEXTAUTH_SECRET you will see
# "There is a problem with the server configuration" at /api/auth/error.
#
# Generate with: openssl rand -base64 32
# Use either AUTH_SECRET or NEXTAUTH_SECRET (one is enough)
AUTH_SECRET="paste-output-of-openssl-rand-base64-32-here"
NEXTAUTH_SECRET="paste-output-of-openssl-rand-base64-32-here"
NEXTAUTH_URL="http://localhost:3000"

# Comma-separated list of emails that get isSuperAdmin: true on registration
# Example: SUPER_ADMIN_EMAILS="admin@example.com,owner@example.com"
SUPER_ADMIN_EMAILS=""

# ============================================================
# iOS OTA / HTTPS TUNNEL (local device testing only)
# ============================================================
# iOS requires HTTPS with a valid TLS certificate for OTA app installs.
# When testing on a real device from a local dev server, expose port 3000
# through a tunnel and set these two variables to the tunnel's HTTPS URL.
#
# In production (Docker + Caddy), leave these UNSET — Caddy handles HTTPS
# automatically and the correct public URL is derived from the request.
#
# Option A — Cloudflare Tunnel (free, no account needed):
# brew install cloudflare/cloudflare/cloudflared
# cloudflared tunnel --url http://localhost:3000
# → copies the printed https://*.trycloudflare.com URL below
#
# Option B — ngrok (free tier, requires free account at ngrok.com):
# brew install ngrok/ngrok/ngrok && ngrok config add-authtoken <token>
# ngrok http 3000
# → copies the printed https://*.ngrok-free.app URL below
#
# NEXT_PUBLIC_APP_URL is used by the client-side install button.
# APP_URL is used by the server-side manifest endpoint.
# Both must be set to the same tunnel URL.
# NEXT_PUBLIC_APP_URL=https://your-tunnel-url
# APP_URL=https://your-tunnel-url

# ============================================================
# REDIS (optional — enables background job processing)
# ============================================================
# When set, release binary parsing and notifications run asynchronously
# via BullMQ workers. When unset, everything runs inline (synchronous).
# REDIS_URL="redis://localhost:6379"

# ============================================================
# STORAGE
# ============================================================
# Supported providers: local, aws-s3, gcp-storage, gcp-enterprise, azure-blob
STORAGE_PROVIDER=local

# --- Local (default, no extra config needed) ---
LOCAL_STORAGE_PATH=./data/uploads

# --- Google Cloud Storage ---
# STORAGE_PROVIDER=gcp-storage
# GCS_PROJECT_ID=your-gcp-project-id
# GCS_BUCKET=your-bucket-name
#
# Authentication — choose one:
# Option A: path to a service account JSON key file (easiest for local dev)
# GCS_KEY_FILE=/path/to/service-account-key.json
# Option B: paste the entire service account JSON as a single-line string
#           (recommended for CI and cloud deployments — no file needed)
# GCS_CREDENTIALS={"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}

# --- Enterprise GCP dual-bucket mode (Cloud Run + external dist bucket) ---
# STORAGE_PROVIDER=gcp-enterprise
# GCS_PROJECT_ID=your-gcp-project-id
# GCS_APP_BUCKET=deploymate-app-prod
# GCS_DISTRIBUTION_BUCKET=deploymate-dist-prod
# DISTRIBUTION_BASE_URL=https://deploymate.example.com
#
# Authentication options are the same as gcp-storage:
# GCS_KEY_FILE=/path/to/service-account-key.json
# GCS_CREDENTIALS={"type":"service_account","project_id":"...","private_key":"...","client_email":"..."}

# --- AWS S3 (or any S3-compatible provider e.g. MinIO, Cloudflare R2) ---
# STORAGE_PROVIDER=aws-s3
# S3_BUCKET=your-bucket-name
# S3_REGION=us-east-1
# AWS_ACCESS_KEY_ID=your-access-key-id
# AWS_SECRET_ACCESS_KEY=your-secret-access-key
# S3_ENDPOINT=https://... # optional — omit for real AWS; set for MinIO/R2/etc.
# S3_FORCE_PATH_STYLE=false # set true for MinIO

# --- Azure Blob Storage ---
# STORAGE_PROVIDER=azure-blob
# AZURE_STORAGE_CONTAINER_NAME=your-container-name
#
# Authentication — choose one:
# Option A: connection string (includes both account name and key)
# AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=...;AccountKey=...
# Option B: account name + key separately
# AZURE_STORAGE_ACCOUNT_NAME=your-account-name
# AZURE_STORAGE_ACCOUNT_KEY=your-account-key

# ============================================================
# EMAIL (optional — enables real email sending)
# ============================================================
# When configured, invitation emails, OTP codes, and release notifications
# are sent via SMTP. When unset, emails are logged to the console.
#
# Gmail example:     SMTP_HOST=smtp.gmail.com  SMTP_PORT=587
# AWS SES example:   SMTP_HOST=email-smtp.us-east-1.amazonaws.com  SMTP_PORT=587
SMTP_HOST=""
SMTP_PORT=587
SMTP_USER=""
SMTP_PASS=""
EMAIL_FROM="DeployMate <noreply@example.com>"

# ============================================================
# LOGGING
# ============================================================
# Levels: fatal, error, warn, info, debug, trace
# Default: debug (dev), info (production)
# LOG_LEVEL=debug
